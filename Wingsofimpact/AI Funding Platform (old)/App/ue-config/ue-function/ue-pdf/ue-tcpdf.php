<?php
session_start();include('../../ue-globalconfig.php');include('../../ue-globalconnect.php');include('../../ue-globalfunction.php');require_once('tcpdf.php');$pdf=new TCPDF(PDF_PAGE_ORIENTATION,PDF_UNIT,PDF_PAGE_FORMAT,true,'UTF-8',false);$auPostedElements=array();foreach($_POST as $postedElementsKey=>$postedElementsVal){$auPostedElements["$postedElementsKey"]=ueReceiveInput($postedElementsKey,$postedElementsVal,false);}$pdfKey=$auPostedElements['pdfKey'];$pdfTitle=$auPostedElements['pdfTitle'];$pdfContent='<div style="text-align: center; font-weight: bold; font-size: 15px;">'.'<span style="font-size: 5px;"><br/></span>'.$pdfTitle.'</div><div style="font-size: 7px;">'.ueWritePage($auPostedElements['pdfContent'],true).'<div>';$pdfBarcode=$auPostedElements['pdfBarcode'];$generatedDate='Generated Date: '.date("j F Y - g:ia")."\n".$globvar_address."\n\n";$pdfLogo=explode('/images/',$ue_globvar_purchase_emails_logo);$pdfLogo='../../../images/'.$pdfLogo[1];if($pdfKey==md5('uePDFKey'.$globvar_adminidsite)){$pdf->SetCreator(PDF_CREATOR);$pdf->SetAuthor('Ultima Engine - '.$globvar_sitename);$pdf->SetTitle($pdfTitle);$pdf->SetSubject($pdfTitle);$pdf->SetKeywords('PDF,UE,UltimaEngine,'.$globvar_sitename);$pdf->SetHeaderData($pdfLogo,40,$pdfTitle,$generatedDate,array(0,0,0),array(0,0,0));$pdf->setFooterData(array(0,64,0),array(0,0,0));$pdf->setHeaderFont(Array(PDF_FONT_NAME_MAIN,'',PDF_FONT_SIZE_MAIN));$pdf->setFooterFont(Array(PDF_FONT_NAME_DATA,'',PDF_FONT_SIZE_DATA));$pdf->SetDefaultMonospacedFont(PDF_FONT_MONOSPACED);$pdf->SetMargins(PDF_MARGIN_LEFT,PDF_MARGIN_TOP,PDF_MARGIN_RIGHT);$pdf->SetHeaderMargin(PDF_MARGIN_HEADER);$pdf->SetFooterMargin(PDF_MARGIN_FOOTER);$pdf->SetAutoPageBreak(TRUE,PDF_MARGIN_BOTTOM);$pdf->setImageScale(PDF_IMAGE_SCALE_RATIO);if(@file_exists(dirname(__FILE__).'/lang/eng.php')){require_once(dirname(__FILE__).'/lang/eng.php');$pdf->setLanguageArray($l);}$pdf->setFontSubsetting(true);$pdf->AddPage('P','A4');if($pdfBarcode!=''){$style=array('position'=>'C','align'=>'R','stretch'=>false,'fitwidth'=>true,'cellfitalign'=>'','border'=>false,'hpadding'=>'auto','vpadding'=>'auto','fgcolor'=>array(0,0,0),'bgcolor'=>false,'text'=>true,'font'=>'helvetica','fontsize'=>8,'stretchtext'=>4);$pdfContent.=$pdf->write1DBarcode($pdfBarcode,'C39','','','',18,0.4,$style,'N');}$pdf->setTextShadow(array('enabled'=>true,'depth_w'=>0.2,'depth_h'=>0.2,'color'=>array(196,196,196),'opacity'=>1,'blend_mode'=>'Normal'));$html=$pdfContent;$pdf->writeHTMLCell(0,0,'','',$html,0,1,0,true,'',true);$pdf->Output($pdfTitle.' - '.$generatedDate.'.pdf','D');}?>