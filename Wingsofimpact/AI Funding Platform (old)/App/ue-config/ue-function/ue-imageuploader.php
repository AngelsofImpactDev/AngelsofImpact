<?php require_once('ue-imagemagician/php_image_magician.php');function imageCropper($imageCropperFile,$imageCropperStartFromX,$imageCropperStartFromY,$imageCropperWidth,$imageCropperHeight){$imageCropCoordinate=(int)$imageCropperStartFromX.'x'.(int)$imageCropperStartFromY;$magicianObj=new imageLib($imageCropperFile);$magicianObj -> cropImage($imageCropperWidth,$imageCropperHeight,$imageCropCoordinate);$magicianObj -> saveImage($imageCropperFile,100);return true;}function imageWatermarker($imageWatermarkerTarget,$imageWatermarkerFile='',$imageWatermarkerPos='br',$imageWatermarkerPadding='20'){$magicianObj=new imageLib($imageWatermarkerTarget);$magicianObj -> addWatermark($imageWatermarkerFile,$imageWatermarkerPos,$imageWatermarkerPadding);$magicianObj -> saveImage($imageWatermarkerTarget,100);return true;}function imageConverter($imageConverterTarget,$imageConverterType='jpg',$imageConverterQuality=100){$imageConverterType=str_replace('.','',$imageConverterType);$imageConverterFilenamePure=pathinfo($imageConverterTarget);$imageConverterTargetName=$imageConverterFilenamePure['dirname'].'/'.$imageConverterFilenamePure['filename'].'.'.$imageConverterType;$magicianObj=new imageLib($imageConverterTarget);$magicianObj -> saveImage($imageConverterTargetName,$imageConverterQuality);if(file_exists($imageConverterTargetName)==true&&$imageConverterTarget!=$imageConverterTargetName){@ unlink($imageConverterTarget);}$imageConverterTargetNameReturn=pathinfo($imageConverterTargetName);return $imageConverterTargetNameReturn['basename'];}function imageRotater($imageRotaterTarget,$imageRotaterAngle){$magicianObj=new imageLib($imageRotaterTarget);$magicianObj -> rotate($imageRotaterAngle);$magicianObj -> saveImage($imageRotaterTarget,100);}function imageEXIF($imageEXIFtarget){$imageEXIFExtension=pathinfo($imageEXIFtarget);if($imageEXIFExtension['extension']=='jpg'||$imageEXIFExtension['extension']=='jpeg'){$magicianObj=new imageLib($imageEXIFtarget);$exifArray=$magicianObj -> getExif();foreach($exifArray as $exifArrayKey=>$exifArrayVal){if($exifArrayVal==''){$exifArray[$exifArrayKey]='No Data';}else{$exifArray[$exifArrayKey]=ucfirst($exifArrayVal);}}}else{$exifArray=array();for($i=0;$i<=14;$i++){$exifArray[]='-';}}return $exifArray;}function imageFilterer($imageFiltererTarget,$imageFiltererMode='greyscale'){$magicianObj=new imageLib($imageFiltererTarget);switch($imageFiltererMode){case 'greyscale':$magicianObj -> greyScale();break;case 'greyscaleEnhanced':$magicianObj -> greyScaleEnhanced();break;case 'greyscaleDramatic':$magicianObj -> greyScaleDramatic();break;case 'blackAndWhite':$magicianObj -> blackAndWhite();break;case 'sepia':$magicianObj -> sepia();break;case 'negative':$magicianObj -> negative();break;case 'vintage':$magicianObj -> vintage();break;case 'sharpen':$magicianObj -> sharpen();break;}$magicianObj -> saveImage($imageFiltererTarget,100);}function imageUploader($objekFile,$allowedTypes='',$moveUploadedFile,$uploadedFileName='',$maxWidth=9999,$maxHeight=9999,$imageThumbFolderLocation='',$thumbMaxWidth=50,$thumbMaxHeight=25,$enableCropMode=false,$imageWatermark=false,$minFileSize=1,$maxFileSize=999999999999){if($objekFile['tmp_name']!=''){list($width,$height,$type,$attr)=getimagesize($objekFile['tmp_name']);if($allowedTypes==''){$allowedTypes=array('image/pipeg','image/jpeg','image/pjpeg','image/png','image/x-png','image/gif','image/bmp');}else{@ $allowedTypes=explode(',',$allowedTypes);}if(in_array($objekFile['type'],$allowedTypes)==false){$allowed=false;}else{$allowed=true;}if($enableCropMode===true){$resizeMode='crop';}else{$resizeMode='auto';}if($allowed==false){return 'Illegal File Type';}else if((int)$objekFile['size']<(int)$minFileSize&&(int)$objekFile['size']>(int)$maxFileSize){return 'File Size Too Big';}else if($moveUploadedFile==''||$moveUploadedFile==NULL){return 'Nowhere To Move File';}else if($objekFile['error']!=0){return 'Upload Failed';}else{$uploadedExt=pathinfo($objekFile['name']);$uploadedExt='.'.$uploadedExt['extension'];$objekFile['name']=md5(md5(rand(0,1000))).$uploadedExt;@ unlink("$imageThumbFolderLocation/".$objekFile['name'].strtolower("$uploadedExt"));@ unlink("$moveUploadedFile/".$objekFile['name'].strtolower("$uploadedExt"));if($imageThumbFolderLocation!=''&&$imageThumbFolderLocation!=NULL){@ copy($objekFile['tmp_name'],"$imageThumbFolderLocation/".$objekFile['name']);}@ move_uploaded_file($objekFile['tmp_name'],"$moveUploadedFile/".$objekFile['name']);@ chmod("$moveUploadedFile/".$objekFile['name'],0644);if($uploadedFileName=='random'){date_default_timezone_set('Asia/Jakarta');@ $randNameGen=mktime().rand(0,9999);$uploadedExt=substr($objekFile['name'],strrpos($objekFile['name'],'.'));@ unlink("$moveUploadedFile/".$randNameGen.strtolower($uploadedExt));rename("$moveUploadedFile/".$objekFile['name'],"$moveUploadedFile/".strtolower($randNameGen).strtolower("$uploadedExt"));$fileNameToReturn=strtolower($randNameGen.strtolower($uploadedExt));}else if($uploadedFileName!=''){$uploadedExt=substr($objekFile['name'],strrpos($objekFile['name'],'.'));@ unlink("$moveUploadedFile/".$uploadedFileName.strtolower($uploadedExt));rename("$moveUploadedFile/".$objekFile['name'],"$moveUploadedFile/".strtolower($uploadedFileName).strtolower("$uploadedExt"));$fileNameToReturn=strtolower($uploadedFileName.strtolower($uploadedExt));}else{$fileNameToReturn=$objekFile['name'];}if($width>$maxWidth||$height>$maxHeight){$magicianObj=new imageLib("$moveUploadedFile/".$fileNameToReturn);$magicianObj -> resizeImage($maxWidth,$maxHeight,$resizeMode);$magicianObj -> saveImage("$moveUploadedFile/".$fileNameToReturn,100);}if($imageThumbFolderLocation!=''&&$imageThumbFolderLocation!=NULL){rename("$imageThumbFolderLocation/".$objekFile['name'],"$imageThumbFolderLocation/".$fileNameToReturn);$magicianObj=new imageLib("$imageThumbFolderLocation/".$fileNameToReturn);$magicianObj -> resizeImage($thumbMaxWidth,$thumbMaxHeight,$resizeMode);$magicianObj -> saveImage("$imageThumbFolderLocation/".$fileNameToReturn,100);}if($imageWatermark){imageWatermarker("$moveUploadedFile/".$fileNameToReturn,$imageWatermark);}return $fileNameToReturn;}}else{return 'Empty File';}}?>