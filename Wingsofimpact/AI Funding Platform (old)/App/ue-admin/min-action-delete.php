<?php
 include('ue-includes/ue-ses_check.php');$auPostedElements=array();foreach($_GET as $postedElementsKey=>$postedElementsVal){$auPostedElements["$postedElementsKey"]=ueReceiveInput($postedElementsKey,$postedElementsVal);}$id=$auPostedElements['id'];$table=$auPostedElements['fromtable'];$page=$auPostedElements['frompage'];$type=$auPostedElements['action'];$idColumnName=$table.'_id';$purchasecode=$auPostedElements['purchasecode'];$foreignKeyDelete=array();$imageDelete=array('product'=>array('productImage','productImageThumb'),'productimage'=>array('productImage','productImageThumb'),'bank'=>array('bankLogo'),'lookbook'=>array('lookbook','lookbookslider'),'lookbookimage'=>array('lookbookslider'),'news'=>array('news'),'newsauthor'=>array('newsauthor'),'productbrand'=>array('productBrandImage'),'productcategory'=>array('productCategoryImage'),'productclass'=>array('productClassImage'),'producttype'=>array('productTypeImage'),'slider'=>array('sliderImage'),'testimonial'=>array('testimonial'));switch($table){case  'product':$foreignKeyDelete[]='productcolor';$foreignKeyDelete[]='productimage';$foreignKeyDelete[]='productsize';$foreignKeyDelete[]='productsold';break;case  'lookbook':$foreignKeyDelete[]='lookbookimage';break;}if($id==''){header("Location: $page".pageParamsFormat($pageParamsArr));break;}else{if(count($imageDelete["$table"])>0){foreach($imageDelete["$table"]as $imageDeleteKey=>$imageDeleteVal){switch($table){case  'product':$getImageNameQue=ue_query("SELECT productimage_image FROM productimage WHERE ".$table."_id = '".$id."'");while($getImageNameRes=ue_fetch_array($getImageNameQue)){if($getImageNameRes["productimage_image"]!=''){@unlink('../upload/'.$imageDeleteVal.'/'.$getImageNameRes["productimage_image"]);}}break;case  'lookbook':if($imageDeleteVal=='lookbook'){$getImageNameQue=ue_query("SELECT ".$table."_image FROM ".$table." WHERE ".$table."_id = '".$id."' LIMIT 1");@$getImageNameRes=ue_fetch_array($getImageNameQue);if($getImageNameRes["$table"."_image"]!=''){@unlink('../upload/'.$imageDeleteVal.'/'.$getImageNameRes["$table"."_image"]);}}else if($imageDeleteVal=='lookbookslider'){$getImageNameQue=ue_query("SELECT lookbookimage_image FROM lookbookimage WHERE ".$table."_id = '".$id."'");while($getImageNameRes=ue_fetch_array($getImageNameQue)){if($getImageNameRes["lookbookimage_image"]!=''){@unlink('../upload/'.$imageDeleteVal.'/'.$getImageNameRes["lookbookimage_image"]);}}}break;default:$getImageNameQue=ue_query("SELECT ".$table."_image FROM ".$table." WHERE ".$table."_id = '".$id."' LIMIT 1");@$getImageNameRes=ue_fetch_array($getImageNameQue);if($getImageNameRes["$table"."_image"]!=''){@unlink('../upload/'.$imageDeleteVal.'/'.$getImageNameRes["$table"."_image"]);}break;}}}if(count($foreignKeyDelete)>0){foreach($foreignKeyDelete as $foreignKeyDeleteKey=>$foreignKeyDeleteVal){ue_query("DELETE FROM ".$foreignKeyDeleteVal." WHERE ".$table."_id = '".$id."'");}}if($purchasecode!=''){$query="DELETE FROM ".$table." WHERE ".$table."_code = '".$purchasecode."'";}else{$query="DELETE FROM ".$table." WHERE ".$idColumnName." = '".$id."' LIMIT 1";}@$quecek=ue_query($query);}if($auPostedElements['editpageid']!=''){$headerLocationAddStr='&id='.$auPostedElements['editpageid'].'&detailmode=edit';}if($quecek){header("Location: $page".pageParamsFormat($pageParamsArr)."&sta=ok".$headerLocationAddStr);}else{header("Location: $page".pageParamsFormat($pageParamsArr)."&err=Delete Failed".$headerLocationAddStr);}?>